<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚®ãƒ£ã‚¶ãƒ¼æœ€é©åŒ–è¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>
    <style>
        /* ğŸ’¡ ã‚ãªãŸãŒæä¾›ã•ã‚ŒãŸãƒ¢ãƒ€ãƒ³ãªãƒ‡ã‚¶ã‚¤ãƒ³CSSã‚’ãƒ™ãƒ¼ã‚¹ã«èª¿æ•´ */
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f0f0;
            padding: 1em; /* ã‚¹ãƒãƒ›ã§è¦‹ã‚„ã™ã„ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
            margin: 0;
        }

        h1 {
            text-align: center;
            color: #1a73e8;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        
        /* ãƒ•ã‚©ãƒ¼ãƒ ã®ã‚³ãƒ³ãƒ†ãƒŠï¼ˆçµæœè¡¨ç¤ºå«ã‚€ï¼‰ */
        .calculator-container {
            background: #fff;
            padding: 1.5em;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: auto;
            width: 100%;
            box-sizing: border-box;
        }

        label {
            display: block;
            margin: 0.5em 0;
            font-size: 1em;
            font-weight: bold;
        }
        
        /* ğŸ’¡ å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å®‰å®šåŒ– */
        input[type="number"] {
            width: 100%;
            padding: 0.8em;
            margin-top: 0.2em;
            box-sizing: border-box;
            font-size: 1.1em;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            margin-top: 1.5em;
            padding: 0.8em 1.5em;
            font-size: 1.1em;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
        }

        button:hover {
            background-color: #357ae8;
        }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #result {
            margin-top: 2em;
            padding: 1em 0;
            white-space: pre-wrap;
            box-sizing: border-box;
            font-size: 1em;
            color: #333;
            line-height: 1.5;
            text-align: left; /* å·¦å¯„ã›è¨­å®šã‚’å¼·åˆ¶ */
        }
        
        /* --- çµæœè¡¨ç¤ºå†…ã®å¾®èª¿æ•´ --- */
        .status-header {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 8px;
            padding-bottom: 5px;
            border-bottom: 2px solid #eee;
        }

        .min-count-line {
            display: block;
            margin: 10px 0;
            font-size: 1.1em;
            font-weight: normal;
        }

        .details-header {
            display: block;
            margin-top: 15px; 
            font-weight: bold; 
            color: #ffa500; /* ã‚ªãƒ¬ãƒ³ã‚¸ç³» */
            margin-bottom: 5px;
        }
        
        /* ãƒªã‚¹ãƒˆã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’å¾¹åº•çš„ã«ãƒªã‚»ãƒƒãƒˆ */
        #result ul {
            list-style: none;
            padding-left: 0 !important;
            margin: 5px 0 0 !important;
        }
        
        #result li {
            margin-bottom: 3px !important;
            padding-left: 0 !important;
        }

        @media (max-width: 480px) {
            body {
                padding: 0.5em;
            }

            h1 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <h1>ã‚¢ã‚¤ãƒ†ãƒ ç›®æ¨™é”æˆè¨ˆç®—</h1>
        
        <label for="currentItems">ç¾åœ¨ã®ã‚¢ã‚¤ãƒ†ãƒ å€‹æ•° (ç›®æ¨™ 2000)</label>
        <input type="number" id="currentItems" value="1000" placeholder="ç¾åœ¨ã®å€‹æ•°">
    
        <label for="availableStamina">ä½¿ãˆã‚‹ã‚¹ã‚¿ãƒŸãƒŠæ•° (ã‚³ã‚¹ãƒˆ 21)</label>
        <input type="number" id="availableStamina" value="420" placeholder="ã‚¹ã‚¿ãƒŸãƒŠæ•°">

        <button onclick="calculateOptimal()">è¨ˆç®—å®Ÿè¡Œ</button>

        <div id="result">
            </div>
    </div>

    <script>
        function calculateOptimal() {
            const currentItems = parseInt(document.getElementById('currentItems').value);
            const availableStamina = parseInt(document.getElementById('availableStamina').value);

            if (isNaN(currentItems) || isNaN(availableStamina) || currentItems < 0 || availableStamina < 0) {
                document.getElementById('result').innerHTML = '<span style="color: red; font-weight: bold;">âš ï¸ ã‚¢ã‚¤ãƒ†ãƒ æ•°ã¨ã‚¹ã‚¿ãƒŸãƒŠæ•°ã«æ­£ã—ã„æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</span>';
                return;
            }

            const goal = 2000;
            const neededItems = goal - currentItems;
            let resultHtml = '';

            if (neededItems <= 0) {
                resultHtml = `<div class="status-header" style="color: green;">ğŸ‰ ç›®æ¨™ã‚¢ã‚¤ãƒ†ãƒ æ•°(${goal}å€‹)ã¯æ—¢ã«é”æˆã—ã¦ã„ã¾ã™ï¼</div>`;
                document.getElementById('result').innerHTML = resultHtml;
                return;
            }

            const STAMINA_COST = 21;
            const DROP_A = 10;
            const DROP_B = 3;

            // --- æœ€å°ç·å›æ•°ã‚’æ±‚ã‚ã‚‹ç·å½“ãŸã‚Šæ¢ç´¢ (é¶´äº€ç®—å¿œç”¨) ---
            let minTotalCount = Infinity;
            let finalMinACount = -1;
            let finalMinBCount = -1;
            
            const A_max_needed = Math.ceil(neededItems / DROP_A); 

            for (let a = 0; a <= A_max_needed; a++) {
                const remainingItems = neededItems - (a * DROP_A);
                const b = remainingItems <= 0 ? 0 : Math.ceil(remainingItems / DROP_B);
                
                const totalCount = a + b;
                
                if (totalCount < minTotalCount) {
                    minTotalCount = totalCount;
                    finalMinACount = a;
                    finalMinBCount = b;
                }
            }

            const minStaminaCost = minTotalCount * STAMINA_COST;
            const totalItemsAchieved = (finalMinACount * DROP_A) + (finalMinBCount * DROP_B);
            
            // --- ã‚¹ã‚¿ãƒŸãƒŠåˆ¶ç´„ã®åˆ¤å®š ---

            if (minStaminaCost > availableStamina) {
                // ã‚¹ã‚¿ãƒŸãƒŠä¸è¶³
                const shortage = minStaminaCost - availableStamina;
                resultHtml = `
                <div class="status-header" style="color: red;">âŒ ã‚¹ã‚¿ãƒŸãƒŠä¸è¶³ã§ç›®æ¨™é”æˆä¸å¯</div>
                ç›®æ¨™é”æˆã«å¿…è¦ãªæœ€å°å›æ•° ${minTotalCount}å›åˆ†ã®ã‚¹ã‚¿ãƒŸãƒŠã¯ ${minStaminaCost} ã§ã™ã€‚
                <br>
                ã‚ã¨ <strong>${shortage}</strong> ã‚¹ã‚¿ãƒŸãƒŠãŒå¿…è¦ã§ã™ã€‚
                `;
            } else {
                // é”æˆå¯èƒ½
                const remainingStamina = availableStamina - minStaminaCost;

                resultHtml = `
                <div class="status-header" style="color: green;">âœ… ç›®æ¨™é”æˆå¯èƒ½ï¼ˆæœ€å°å›æ•°ï¼‰</div>

                <span class="min-count-line">2000å€‹é”æˆã®ãŸã‚ã«ã€Aã‚®ãƒ£ã‚¶ãƒ¼ã¯æœ€ä½ <strong>${finalMinACount}å›</strong> å‚åŠ ãŒå¿…è¦ã§ã™ã€‚</span>

                <span class="details-header">
                ğŸ”¸ å†…è¨³ï¼ˆæœ€å°ã‚¹ã‚¿ãƒŸãƒŠ ${minStaminaCost} ã§é”æˆï¼‰:
                </span>
                <ul>
                    <li>ãƒ»Aã‚®ãƒ£ã‚¶ãƒ¼ (ãƒ‰ãƒ­ãƒƒãƒ—10): ${finalMinACount}å›</li>
                    <li>ãƒ»Bã‚®ãƒ£ã‚¶ãƒ¼ (ãƒ‰ãƒ­ãƒƒãƒ—3): ${finalMinBCount}å›</li>
                    <li>ãƒ»åˆè¨ˆã‚¢ã‚¤ãƒ†ãƒ : ${totalItemsAchieved}å€‹</li>
                    <li>ãƒ»åˆè¨ˆæ¶ˆè²»ã‚¹ã‚¿ãƒŸãƒŠ: ${minStaminaCost} (æ®‹ã‚Šã‚¹ã‚¿ãƒŸãƒŠ: ${remainingStamina})</li>
                </ul>
                `;
            }

            document.getElementById('result').innerHTML = resultHtml;
        }

        // åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚ã¨å…¥åŠ›å¤‰æ›´æ™‚ã«è¨ˆç®—ã‚’å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', calculateOptimal);
        document.getElementById('currentItems').addEventListener('input', calculateOptimal);
        document.getElementById('availableStamina').addEventListener('input', calculateOptimal);

    </script>
</body>
</html>
